<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion</title>
    <meta name="description" content="Connexion à votre compte Confiancy">
    <meta name="author" content="console-x1">
    <meta name="theme-color" content="#0f172a">
    <meta name="title" content="Confiancy • Réseau de Confiance">
    <link rel="icon" href="./media/logoCircle.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        html {
            background-color: #131b2d;
            z-index: -1;
        }
    </style>

    <script src="./javascript/tailwind.min.js"></script>

    <style type="text/tailwindcss">
        @layer base {
            body {
                font-family: 'Inter', sans-serif;
                min-height: 100vh;
            }
                
            ::-webkit-scrollbar {
                width: 6px;
            }
                
            ::-webkit-scrollbar-track {
                background: transparent;
            }
                
            ::-webkit-scrollbar-thumb {
                background: rgba(59, 130, 246, 0.3);
                border-radius: 3px;
            }
                
            ::-webkit-scrollbar-thumb:hover {
                background: rgba(59, 130, 246, 0.5);
            }
                
            * {
                scrollbar-width: thin;
                scrollbar-color: rgba(59, 130, 246, 0.3) transparent;
            }
                
            .trust-badge {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            }
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center p-10">

    <div class="fixed inset-0 -z-0 pointer-events-none">
        <div
            class="absolute top-0 left-0 w-32 h-32 bg-blue-500 rounded-full mix-blend-multiply filter blur-2xl opacity-10 animate-pulse">
        </div>
        <div
            class="absolute bottom-0 right-0 w-32 h-32 bg-violet-500 rounded-full mix-blend-multiply filter blur-2xl opacity-10 animate-pulse delay-1500">
        </div>
    </div>

    <div class="container w-full max-w-md">
        <div class="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8" role="main">
            <a href="./index.html" class="flex justify-center mb-6">
                <img class="w-32 h-32 logo-spin transition-transform duration-500 rounded-full" src="./media/logo.png"
                    alt="Logo">
            </a>

            <h1
                class="text-2xl font-semibold text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-blue-700 mb-6">
                Bienvenue
            </h1>

            <form class="space-y-4" id="loginForm">
                <div>
                    <input type="email" id="email" name="email"
                        class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                        placeholder="Email" required autocomplete="email">
                </div>

                <div>
                    <input type="password" id="password" name="password"
                        class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                        placeholder="Mot de passe" required autocomplete="current-password">
                </div>

                <button type="submit"
                    class="w-full py-3 px-6 font-semibold rounded-xl bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 transition-all duration-200 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                    Se connecter
                </button>

                <div class="text-center text-sm text-gray-400 mt-6">
                    <p>Pas encore de compte ?</p>
                    <a href="./register.html" class="text-blue-400 hover:text-blue-300 underline">Créer un compte</a>

                    <div class="mt-4">
                        <p>Vous avez une connexion externe ?</p>
                        <a href="./api/Oauth2/discord/login/getUrl"
                            class="block text-blue-400 hover:text-blue-300 underline mt-1">Se connecter via Discord</a>
                        <a href="./api/Oauth2/github/login/getUrl"
                            class="block text-blue-400 hover:text-blue-300 underline mt-1">Se connecter via GitHub</a>
                    </div>

                    <div class="mt-4">
                        <a href="./dashboard/update-password" id="forgot-link" class="text-blue-400 hover:text-blue-300 underline">Mot de passe
                            oublié ?</a>
                    </div>
                </div>
            </form>

            <p id="errorMessage" class="text-red-400 text-center mt-4 hidden"></p>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const button = e.target.querySelector('button');
            button.style.transform = 'scale(0.95)';
            setTimeout(() => button.style.transform = '', 150);
        });

        document.getElementById("forgot-link").addEventListener("click", function (e) {
            e.preventDefault();
            const email = prompt("Veuillez entrer votre adresse email :");
            if (!email) return;
            window.location.href = "./dashboard/update-password?email=" + encodeURIComponent(email)
        });
    </script>
    <script src="javascript/auth.js"></script>
</body>

</html>